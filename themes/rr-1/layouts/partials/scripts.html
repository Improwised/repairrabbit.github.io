<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="/plugins/jquery/dist/jquery.min.js"></script>
<script src="/plugins/popper.js/dist/popper.min.js"></script>
<script src="/plugins/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/plugins/rrssb-master/js/rrssb.min.js"></script>

<script type="text/javascript">
  // navigation
  function navbarClassAddRemoveOnScroll() {
    if ($('.navbar-toggler').css('display') == 'none') {
      if($(window).scrollTop() == 0) {
        $('.navbar').addClass('nav-transparent');
      } else {
        $('.navbar').removeClass('nav-transparent');
      }
    } else {
      $('.navbar').removeClass('nav-transparent');
    }
  }
  function navbarClassAddRemoveOnResize() {
    if (window.innerWidth <= 991) {
      $('.navbar').removeClass('nav-transparent');
    } else {
      if($(window).scrollTop() == 0) {
        $('.navbar').addClass('nav-transparent');
      } else {
        $('.navbar').removeClass('nav-transparent');
      }
    }
  }
  if (window.location.pathname == '/') {
    navbarClassAddRemoveOnScroll();
    navbarClassAddRemoveOnResize();
    $(window).scroll(function (event) {
      navbarClassAddRemoveOnScroll();
    });
    $( window ).resize(function() {
      navbarClassAddRemoveOnResize();
    });
  }

  // smooth scrolling
  $( document ).ready(function() {
    $(document).on("scroll", onScroll);
    if (window.location.hash) {
      $('html, body').animate({ scrollTop: $(window.location.hash).offset().top - 88}, 1000);
    }
  });
  $(".navbar-custom li a").click(function(e) {
    if($(this).attr('href').replace('/','')) {
      $('html, body').animate({ scrollTop: $($(this).attr('href').replace('/','')).offset().top - 88}, 1000);
    }
  });

  function onScroll(event){
    console.log('called');
    var scrollPos = $(document).scrollTop() + 88;
    $('.nav-item a').each(function () {
        var currLink = $(this);
        var links = currLink.attr("href");
        if( links &&  links.indexOf('/#') != -1 ) {
          var refElement = $(links.replace("/", ""));
          if (Object.keys(refElement).length > 0) {
            if (refElement.position().top <= scrollPos && refElement.position().top + refElement.height() > scrollPos) {
                $('.nav-item').removeClass("active");
                currLink.parent().addClass("active");
            }
            else{
                currLink.parent().removeClass("active");
            }
          }
        }
    });
  }
</script>
